(this["webpackJsonpoffice-equip-manager-app"]=this["webpackJsonpoffice-equip-manager-app"]||[]).push([[0],{127:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=127},137:function(e,t,n){e.exports=n(284)},146:function(e,t,n){},153:function(e,t){},155:function(e,t){},205:function(e,t){},206:function(e,t){},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(51),u=n(13),o=(n(146),n(3)),i=n.n(o),s=n(8),l="ADD_EQUIPMENT",m="DELETE_EQUIPMENT",p="EDIT_EQUIPMENT",f=function(e){return{type:"SET_EQUIPMENT",equipment:e}},d=n(17),b=n(42),O=n(22),E=n.n(O),v="buildings",y="equipment",h=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new E.a.Query(t),e.next=4,n.find();case 4:r=e.sent,e.t0=t,e.next=e.t0===y?8:e.t0===v?9:10;break;case 8:return e.abrupt("return",r.result.reduce((function(e,t){var n=t._id,r=t.name,a=t.room,c=t.count;return e[t.room]=e[t.room]?[].concat(Object(b.a)(e[t.room]),[{id:n,name:r,room:a,count:c}]):[{id:n,name:r,room:a,count:c}],e}),{}));case 9:return e.abrupt("return",r.result.map((function(e){var t={id:e._id,name:e.name};return e.rooms&&(t.rooms=e.rooms.map((function(e){var t={id:e.id,name:e.name};return e.children&&(t.rooms=e.children.map((function(e){var t={id:e.id,name:e.name};return e.children&&(t.rooms=e.children.map((function(e){return{id:e.id,name:e.name}}))),t}))),t}))),t})));case 10:return e.abrupt("return",[]);case 11:e.next=17;break;case 13:return e.prev=13,e.t1=e.catch(0),console.log(e.t1),e.abrupt("return",e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),j=i.a.mark(w),_=f;function w(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(h,y);case 2:return e=t.sent,t.next=5,Object(s.c)(_(e));case 5:case"end":return t.stop()}}),j)}var g=i.a.mark(N),x=function(e){return{type:"SET_STRUCTURE",structure:e}};function N(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(h,v);case 2:return e=t.sent,t.next=5,Object(s.c)(x(e));case 5:case"end":return t.stop()}}),g)}var k=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,r,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,a=t.quantity,c=new E.a.Object("equipment"),u=parseInt(a,10),c.set("_id",n).set("name",r).set("count",u),e.next=6,c.save();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=i.a.mark(C),I=f;function C(){var e,t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.d)((function(e){return e.postItemData}));case 2:return e=n.sent,n.next=5,Object(s.b)(k,e);case 5:return n.next=7,Object(s.b)(h,y);case 7:return t=n.sent,n.next=10,Object(s.c)(I(t));case 10:case"end":return n.stop()}}),q)}var S=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=new E.a.Object("equipment"),e.next=4,r.getById(n);case 4:return a=e.sent,e.next=7,r.remove(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=i.a.mark(R),D=f;function R(){var e,t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.d)((function(e){return e.postItemData}));case 2:return e=n.sent,n.next=5,Object(s.b)(S,e);case 5:return n.next=7,Object(s.b)(h,y);case 7:return t=n.sent,n.next=10,Object(s.c)(D(t));case 10:case"end":return n.stop()}}),A)}var T=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,r,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,a=t.quantity,c=new E.a.Object("equipment"),u=parseInt(a,10),c.set("name",r).set("room",n).set("count",u),e.next=6,c.save();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=i.a.mark(M),U=f;function M(){var e,t,n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(s.d)((function(e){return e.postItemData}));case 2:return e=a.sent,a.next=5,Object(s.d)((function(e){return e.isRoom}));case 5:return t=a.sent,n={id:t,name:e.name,quantity:e.quantity},a.next=9,Object(s.b)(T,n);case 9:return a.next=11,Object(s.b)(h,y);case 11:return r=a.sent,a.next=14,Object(s.c)(U(r));case 14:case"end":return a.stop()}}),P)}var Q=i.a.mark(B),L=i.a.mark(J),F=i.a.mark(W);function B(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(p,C);case 2:case"end":return e.stop()}}),Q)}function J(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(m,R);case 2:case"end":return e.stop()}}),L)}function W(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(l,M);case 2:case"end":return e.stop()}}),F)}var G=i.a.mark(H);function H(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)([N(),w(),B(),J(),W()]);case 2:case"end":return e.stop()}}),G)}var K=n(53),z=n(26),V=n(136),X=n(135);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(K.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{structure:[],equipment:{},showEquipArray:[],postItemData:{},isRoom:!1,isAddingOn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STRUCTURE":return Z({},e,{structure:t.structure});case"SET_EQUIPMENT":return Z({},e,{equipment:t.equipment});case"SHOW_EQUIPMENT":return Z({},e,{showEquipArray:t.idArray});case p:case m:case l:return Z({},e,{postItemData:t.data});case"SET_IS_ROOM":return Z({},e,{isRoom:t.isRoom});case"SET_IS_ADDING":return Z({},e,{isAddingOn:t.isAdding});default:return e}};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n(274);var te=function(){return a.a.createElement("div",{className:"header"},a.a.createElement("h1",{className:"header__title"},"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"))},ne=(n(275),function(){return a.a.createElement("div",{className:"footer"},a.a.createElement("span",{className:"footer__text"},"Created by"," ",a.a.createElement("a",{href:"https://github.com/LonelyDutchhound"},"Lonely Dutchhound")))}),re=(n(276),n(18)),ae=function e(t){var n=[];return n.push(t.id),t.rooms&&t.rooms.forEach((function(t){return e(t).forEach((function(e){return n.push(e)}))})),n},ce=(n(277),function(e){var t=e.style,n=e.onClick,r=e.name,c=e.className;return a.a.createElement("button",{type:"button",className:c,style:t,onClick:n},r)}),ue="#d81200",oe=(n(278),Object(u.b)((function(e){return{isAddingOn:e.isAddingOn}}),(function(e){return{showRelEquipment:function(t){return e(function(e){return{type:"SHOW_EQUIPMENT",idArray:e}}(t))},setIsRoom:function(t){return e(function(e){return{type:"SET_IS_ROOM",isRoom:e}}(t))}}}))((function e(t){var n=t.unit,c=t.showRelEquipment,u=t.setIsRoom,o=t.isAddingOn,i=n.name,s=n.rooms,l=n.id,m=Object(r.useState)(!1),p=Object(re.a)(m,2),f=p[0],d=p[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"list__item"},s?a.a.createElement(ce,{className:"item__button",style:f?{backgroundColor:ue}:{backgroundColor:"#00d87e"},name:f?"\u25bd":"\u25b7",onClick:function(){d(!f)}}):null,a.a.createElement("label",{className:"item__label",htmlFor:l},a.a.createElement("input",{id:l,className:"item__selector",type:"radio",name:"unit",disabled:o,onChange:function(){var e=ae(n);n.rooms?u(!1):u(l),c(e)}}),a.a.createElement("p",{className:"item__title"},i))),a.a.createElement("ul",{className:"panel__list"},f&&s&&0!==s.length?s.map((function(t){return a.a.createElement(e,{unit:t,showRelEquipment:c,setIsRoom:u,isAddingOn:o,key:t.id})})):null))}))),ie=function(e){var t=e.unitList.map((function(e){return a.a.createElement(oe,{unit:e,key:e.id})}));return a.a.createElement("div",{className:"panel"},a.a.createElement("ul",{className:"panel__list"},t))},se=(n(279),n(280),function(e){var t=e.readOnly,n=e.quantity,r=e.onChange;return a.a.createElement("input",{readOnly:t,className:"item__quantity",type:"number",value:n,min:"1",onChange:r})}),le=(n(281),Object(u.b)((function(e){return{isRoom:e.isRoom}}),(function(e){return{editEquipQuantity:function(t,n,r,a){return e(function(e,t,n,r){return{type:p,data:{id:e,name:t,quantity:n,room:r}}}(t,n,r,a))},deleteEquipmentItem:function(t){return e(function(e){return{type:m,data:{id:e}}}(t))}}}))((function(e){var t=e.unit,n=e.editEquipQuantity,c=e.deleteEquipmentItem,u=e.isRoom,o=t.id,i=t.name,s=t.count,l=t.room,m=Object(r.useState)(s),p=Object(re.a)(m,2),f=p[0],d=p[1],b=Object(r.useState)(!1),O=Object(re.a)(b,2),E=O[0],v=O[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"list__item"},a.a.createElement("p",{className:"item__title"},i),a.a.createElement(se,{readOnly:!E,quantity:f,onChange:function(e){return d(e.target.value)}}),u?a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,{className:"item__button",style:{backgroundColor:E?"#00d87e":"#96b2b2"},name:E?"\u2611":"\u270e",onClick:function(){E&&n(o,i,f,l),v(!E)}}),a.a.createElement(ce,{className:"item__button",style:{backgroundColor:ue},name:"\u1cf5",onClick:function(){c(o)}})):null))}))),me=(n(282),n(283),function(e){var t=e.name,n=e.onChange,r=e.isInputError;return a.a.createElement("input",{style:r,className:"item__input",type:"text",value:t,onChange:n,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),pe=Object(u.b)(null,(function(e){return{addNewEquipment:function(t,n){return e(function(e,t){return{type:l,data:{name:e,quantity:t}}}(t,n))}}}))((function(e){var t=e.handleCancel,n=e.handleClickAddButton,c=e.addNewEquipment,u=Object(r.useState)(""),o=Object(re.a)(u,2),i=o[0],s=o[1],l=Object(r.useState)("1"),m=Object(re.a)(l,2),p=m[0],f=m[1],d=Object(r.useState)(!1),b=Object(re.a)(d,2),O=b[0],E=b[1];return a.a.createElement("div",{className:"list__wrapper"},a.a.createElement("div",{className:"list__item"},a.a.createElement(me,{value:i,onChange:function(e){var t=e.target.value;return s(t)}}),a.a.createElement(se,{readOnly:!1,quantity:p,onChange:function(e){var t=e.target.value;return f(t)}}),a.a.createElement(ce,{className:"item__button",style:{backgroundColor:"#00d87e"},name:"\u2611",onClick:function(){i&&i.match(/^[\u0410-\u042f\u0430-\u044f]+[0-9]*/)&&p>0?(E(!1),c(i,p),n()):E(!0)}}),a.a.createElement(ce,{className:"item__button",style:{backgroundColor:ue},name:"\u1cf5",onClick:t})),a.a.createElement("p",{className:"list__error"},O?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e":null))})),fe=Object(u.b)((function(e){return{AddIsOn:e.isAddingOn}}),(function(e){return{setIsAddingOn:function(t){return e(function(e){return{type:"SET_IS_ADDING",isAdding:e}}(t))}}}))((function(e){var t=e.unitList,n=e.startText,r=e.isRoom,c=e.setIsAddingOn,u=e.AddIsOn,o=n||t.map((function(e){return a.a.createElement(le,{unit:e,key:e.id})})),s=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!u);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=a.a.createElement(pe,{handleCancel:s,handleClickAddButton:l});return a.a.createElement("div",{className:"panel"},a.a.createElement("ul",{className:"panel__list"},o),r&&!u?a.a.createElement(ce,{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435",className:"panel__button_add",style:null,onClick:l}):null,u?m:null)})),de=Object(u.b)((function(e){return{equipment:e.equipment,showEquipArray:e.showEquipArray,isRoom:e.isRoom}}))((function(e){var t=e.equipment,n=e.showEquipArray,r=e.isRoom,c=a.a.createElement("p",{className:"message"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0435/\u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f");if(0===n.length)return a.a.createElement(fe,{unitList:null,startText:c});var u=Object.entries(t).reduce((function(e,t){var r=Object(re.a)(t,2),a=r[0],c=r[1];return n.includes(a)?[].concat(Object(b.a)(e),Object(b.a)(c)):e}),[]);return a.a.createElement(fe,{unitList:u,isRoom:r})})),be=Object(u.b)((function(e){return{structure:e.structure}}))((function(e){var t=e.structure;return a.a.createElement("div",{className:"container"},a.a.createElement(ie,{unitList:t}),a.a.createElement(de,null))}));E.a.Init({ApplicationID:"3196b2e873234547ad8b06ed636d3538",JavaScriptKey:"5e85f685a23e44e6abad95accc1dd2ea",MasterKey:"659d718ff9664f6fafbdb79efc93cb34"});var Oe=function(){var e=Object(V.a)();return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(K.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(z.createStore)($,Object(X.composeWithDevTools)(Object(z.applyMiddleware)(e))),{runSaga:e.run})}();Oe.runSaga(H);var Ee=function(){return a.a.createElement(u.a,{store:Oe},a.a.createElement("div",{className:"App"},a.a.createElement(te,null),a.a.createElement(be,null),a.a.createElement(ne,null)))};Object(c.render)(a.a.createElement(Ee,null),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.35e927c8.chunk.js.map